# 图形文件

## 图像文件介绍

PINDEF: 管脚定义开始。

<管脚名称> = <I|O|IO>,< BIN > ,(通道号)

——用二进制方式编写图形的管脚定义
<管角组名称>(数值..数值) = <I|O|IO>,< HEX>,(通道号)
——用十六进制方式编写图形的管脚定义
PIN_TO_CHANNEL:
	从第一列开始，在下一行开始编辑管脚与通道的对应关系.
	eg. 1..6= 1..6
		8..13 = 42..47

* 初始指定
* MEM_SOURCE_15;
第一行必须以MEM_SOURCE_15开始，作为图形文件的标志
* 指令格式
MAIN_F: 必须从第一列开始，图形指令及数据段开始标志，表示下面的语句是指令和数据
图形由多个指令组成，每段由START_INDEX()开始，
HALT（图形）结束
图形指令有四种格式：
	指令
	标号 指令
	指令，参数
	标号 指令，参数
* 数据段标记
START_INDEX（起始点标号）
	必须从第一列开始，起始点标号可为0-47间的一个数字。起始点标号用于在执行图形是，表明执行哪一段图形。在Visual C++中编写测试程序时，在调用函数RUN_PATTERN()时，第1 个参数就是起始点标号，与此定义相同，相互对应使用。
* 图形结束
END
	必须从第一列开始，标志图形文件结束
***注意无标号时第一列必须为空格，标号必须从第一列开始，指令与图形之间、参数与图形之间必须空格

==图形文件的编写步骤==
	标准图形文件以.mdc为拓展名，文件第一行为“ MEM_SOURC_15"
		定义管脚以*PINDEF* 为开始标记,定义管脚及管脚组
		定义管脚与通道对应关系以*PIN_TO_CHANNEL* 为开始标记，定义管脚与通道的对应关系
		编辑图形指令及数据以*MAIN_F* 为开始标记，编辑测试图形的流程及图形
		结束标志以*END.* 为结束标记，结束图形文件的编辑
	图形文件编辑完成后，在**CompileDlg.exe** 程序环境下，填写或浏览要编辑的文件->编译->执行编译转换.转换成与源文件相同名称，拓展名为 **.mdv**的二进制文件

0、1：二进制方式，0输入为低，1为输入高
L、H：二进制方式，L为输出低，H为输出高
T:十六进制方式，标度长编码数据为输出
X:表示对应通不驱动，不测试
![[Pasted image 20240308203918.png]]

```C++
BOOL RUN_PATTERN(int start_idx, int get_fail, int apgen, int time_range)
[参数]
apgen:设置apgen测量方式，用于测试存储器时，将通道板转换为地址板使用;
0或NOAPG --- 不设置apgen方式
1或APGEN1 --- 设置1-8通道为apgen方式
2或APGEN2 ---设置1-16通道为apgen方式
3或APGEN3 ---设置1-24通道为apgen方式
```
==图形文件指令说明==
```c++
SET_INPUT_LEVEL(double Vih,double Vil);//设置全部管脚输入驱动电平值
SET_OUTPUT_LEVEL(double Voh, double Vol);//设置所有管脚输出比较电平
```
==波形驱动格式说明==
ST3020集成电路测试系统可以对每一个管脚设置驱动波形，当设置某一个管脚时，不改变其他管脚的格式。ST3020测试系统支持四种驱动格式：


NRZ|非归零方式
--|:--:|--:
NRZ0|满周期
RO|归一格式
RZ|归零格式

---
==设置一个波形需要个几个条件==
1. SET_PERIOD(Tp);周期，单位:ns。指执行一行INC指令的时间.
2. SET_TIMMING(1,2,3);1:前沿， 2：后沿，3：选通
3. SET_INPUT_LEVEL(VIH,VIL); 设置高低电平的电压值（driver)
4. FORMAT(NRZ0,CH); 定义指定通道的波形格式
5. RUN_PATTERN(Index,1,0,0); 运行测试程序
6. SET_OUTPUT_LEVEL(VOH,VOL);

# 指令集介绍
## 常用指令说明




